<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- OWASP Top 10: A03 Injection, A05 Misconfiguration -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://pagead2.googlesyndication.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https://pagead2.googlesyndication.com https://www.googlesyndication.com https://googleads.g.doubleclick.net; object-src 'none'; base-uri 'self'; form-action 'self';">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <title>フォーチュンクッキー｜握力チェッカー"鑷"</title>
  <meta name="description" content="握力チェッカー鑷のフォーチュンクッキー。名言・格言・驚きの実在法令をランダムで表示。握力診断の合間にどうぞ。">
  <meta name="keywords" content="フォーチュンクッキー,名言,格言,握力チェッカー,鑷,驚きの法令">
  <meta name="robots" content="index, follow">
  <meta name="theme-color" content="#6b4e2a">
  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="握力チェッカー 鑷">
  <meta property="og:title" content="フォーチュンクッキー｜握力チェッカー&quot;鑷&quot;">
  <meta property="og:description" content="握力チェッカー鑷のフォーチュンクッキー。名言・格言・驚きの実在法令をランダムで表示。">
  <meta property="og:locale" content="ja_JP">
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="フォーチュンクッキー｜握力チェッカー&quot;鑷&quot;">
  <meta name="twitter:description" content="握力チェッカー鑷のフォーチュンクッキー。名言・格言・驚きの実在法令をランダムで表示。">
  <link rel="canonical" href="fortune.html">
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Noto+Serif+JP:wght@400;700;900&display=swap" as="style">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;0,700;1,400&family=Noto+Serif+JP:wght@400;700;900&display=swap" rel="stylesheet">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8449006086533180" crossorigin="anonymous"></script>
  <!-- Structured Data (JSON-LD) for SEO -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "フォーチュンクッキー｜握力チェッカー 鑷",
    "description": "握力チェッカー鑷のフォーチュンクッキー。名言・格言・驚きの実在法令をランダムで表示。",
    "inLanguage": "ja",
    "isPartOf": { "@type": "WebApplication", "name": "握力チェッカー 鑷" }
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "握力チェッカー", "item": "index.html" },
      { "@type": "ListItem", "position": 2, "name": "フォーチュンクッキー" }
    ]
  }
  </script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Noto Serif JP', 'Hiragino Mincho ProN', serif;
      background: #f8f5ef;
      color: #3a3028;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem 1.2rem;
    }
    .container { max-width: 520px; width: 100%; }
    .header {
      text-align: center;
      margin-bottom: 2rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid rgba(139,109,60,0.15);
    }
    .header h1 {
      font-family: 'Cormorant Garamond', 'Noto Serif JP', serif;
      font-size: 1.4rem;
      font-weight: 700;
      letter-spacing: 0.08em;
      color: #6b4e2a;
    }
    .header .sub { font-size: 0.78rem; color: #9e8e78; margin-top: 0.4rem; }
    .fortune-box {
      background: #fff;
      border: 1px solid rgba(139,109,60,0.12);
      border-radius: 16px;
      padding: 2rem 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 16px rgba(139,109,60,0.06);
      border-left: 4px solid rgba(139,109,60,0.35);
    }
    .fortune-text { font-size: 1rem; line-height: 1.75; color: #3a3028; margin-bottom: 1rem; }
    .fortune-author { font-size: 0.8rem; color: #8b6d3c; text-align: right; font-style: italic; }
    .actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      justify-content: center;
      margin-bottom: 1.25rem;
    }
    .btn {
      display: inline-block;
      padding: 0.6rem 1.4rem;
      font-family: inherit;
      font-size: 0.9rem;
      font-weight: 600;
      color: #fff;
      background: #8b6d3c;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.2s;
    }
    .btn:hover { background: #6b4e2a; }
    .btn-secondary { background: transparent; color: #8b6d3c; border: 1px solid rgba(139,109,60,0.4); }
    .btn-secondary:hover { background: rgba(139,109,60,0.08); }
    .back-link { font-size: 0.85rem; color: #8b6d3c; text-decoration: none; border-bottom: 1px solid rgba(139,109,60,0.35); }
    .back-link:hover { color: #6b4e2a; }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>フォーチュンクッキー</h1>
      <p class="sub">握力チェッカー"鑷"</p>
    </header>
    <div class="actions">
      <button type="button" class="btn" id="nextBtn">次のフォーチュン</button>
      <button type="button" class="btn btn-secondary" id="copyBtn">コピー</button>
    </div>
    <div class="fortune-box">
      <p class="fortune-text" id="fortuneText">読み込み中…</p>
      <p class="fortune-author" id="fortuneAuthor"></p>
    </div>
    <p><a href="index.html" class="back-link">← 握力チェッカーに戻る</a></p>
  </div>
  <script src="fortune-data.js"></script>
  <script>
    const quotes = (window.__FORTUNE_DATA__ && window.__FORTUNE_DATA__.quotes) || [];
    const textEl = document.getElementById('fortuneText');
    const authorEl = document.getElementById('fortuneAuthor');
    const nextBtn = document.getElementById('nextBtn');
    const copyBtn = document.getElementById('copyBtn');

    function showRandom(excludeIndex) {
      if (quotes.length === 0) {
        textEl.textContent = 'フォーチュンが読み込めませんでした。';
        authorEl.textContent = '';
        return;
      }
      var index;
      if (quotes.length === 1) {
        index = 0;
      } else {
        do {
          index = Math.floor(Math.random() * quotes.length);
        } while (index === excludeIndex);
      }
      var q = quotes[index];
      textEl.textContent = q.text || '';
      authorEl.textContent = q.author ? '── ' + q.author : '';
      textEl.dataset.currentIndex = String(index);
    }

    function showNext() {
      var current = textEl.dataset.currentIndex != null ? parseInt(textEl.dataset.currentIndex, 10) : -1;
      showRandom(current);
    }

    nextBtn.addEventListener('click', showNext);
    copyBtn.addEventListener('click', function () {
      const t = textEl.textContent;
      const a = authorEl.textContent.replace(/^──\s*/, '');
      const line = a ? t + ' ── ' + a : t;
      navigator.clipboard.writeText(line).then(function () {
        copyBtn.textContent = 'コピーした';
        setTimeout(function () { copyBtn.textContent = 'コピー'; }, 2000);
      }, function () {});
    });

    showRandom(-1);
  </script>
</body>
</html>
